# Sonos services

The `{service-name}.service.ts` files and the `index.ts` file in this folder are auto generated by the [sonos generator](https://github.com/svrooij/sonos-api-docs/tree/main/generator/sonos-docs).
These files **SHOULD** not be changed, as they will be auto generated again in the future.
If you want to change them please send a PR for the [template](https://github.com/svrooij/sonos-api-docs/tree/main/generator/sonos-docs/templates/ts).

## Use generator

To use the generator run the following command (from the local copy of the generator, inside the `generator/sonos-docs` folder) `./bin/run generate ts ../../../node-sonos-ts` (where the last part should be the root of this library).

## Extending a service

You may extend a service to add functionallity that is tightly connected to the service. Main purpose is parsing embedded xml in a service response or caching.

If you want to extend a service like the [alarm-clock.service](./alarm-clock.service.ts) you should create an [extension file](./alarm-clock.service.extension.ts) and send a pr to have the service marked for extending see [here](https://github.com/svrooij/sonos-api-docs/blob/be774cf75493f97fc65f51cb4de071f781a1a68a/generator/sonos-docs/templates/ts/template.json#L53).

Once a service is marked for extending the following will happen:

- The regular service will be called `{service-name}ServiceBase`.
- The [index](./index.ts) will also include an export for the extension file `export * from './{service-name}.service.extension';`

### Extension file

The extension file may include extra exported members but **MUST** have at least a `{service-name}Service` class that **MUST** extend the `{service-name}ServiceBase` class.

### Test extensions

Since extensions are not generated they might not work with future versions of the speakers we would like to have some automated tests for all service extensions. Check [alarm-clock.service.test](../../tests/services/alarm-clock.service.test.ts) for a sample on how to do that.
